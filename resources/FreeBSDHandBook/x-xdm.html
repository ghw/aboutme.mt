<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.6. X 显示管理器</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手册" /><link rel="up" href="x11.html" title="Chapter 6. X Window 系统" /><link rel="prev" href="x-fonts.html" title="6.5. 在 Xorg 中使用字体" /><link rel="next" href="x11-wm.html" title="6.7. 桌面环境" /><link rel="copyright" href="legalnotice.html" title="版权声明" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.6. X 显示管理器</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x-fonts.html">Prev</a> </td><th width="60%" align="center">Chapter 6. X Window 系统</th><td width="20%" align="right"> <a accesskey="n" href="x11-wm.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-xdm"></a>6.6. X 显示管理器</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71291344"></a>6.6.1. 概要</h3></div></div></div><a id="idp71291984" class="indexterm"></a><p>X 显示管理器（<span class="application">XDM</span>） 是 X Window 系统用于管理登录会话的一个可选组件。
          可用于 小型<span class="quote">“<span class="quote">X 终端</span>”</span>、 桌面和大型网络显示服务器。 既然 X Window 系统不受网络和协议的限制，
          那对于通过网络连接起来的运行 X 客户端和服务器端的不同机器， 就会有很多的可配置项。
          <span class="application">XDM</span> 提供了一个图形用户界面， 让用户选择要连接到哪个显示服务器，
          只需输入如登录用户名和密码这样的验证信息。</p><p>您也可以把 <span class="application">XDM</span> 想象成与 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> （详见：<a class="xref" href="term.html#term-config" title="25.3.2. 配置">Section 25.3.2, “配置”</a>）一样的工具。
          为用户提供了同样功能。 它可以完成系统的登录任务， 然后为用户运行一个会话管理器 (通常是一个 X 视窗管理器)。
          接下来 <span class="application">XDM</span> 就等待这个程序退出， 等用户发出登录结束信号， 退出到登录界面。
          这时， <span class="application">XDM</span> 就开始为下一个用户的登录提供图像选择界面了。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71296976"></a>6.6.2. 使用 XDM</h3></div></div></div><p>如果希望使用 <span class="application">XDM</span> 来管理启动， 就必须安装 <span class="package">x11/xdm</span> 这个
          port (在新版 <span class="application">Xorg</span> 中它并不是默认安装的)。
          <span class="application">XDM</span> 守护程序位于 <code class="filename">/usr/local/bin/xdm</code> 。
          任何时候都可以以 <code class="systemitem">root</code> 用户的身份来运行它，
          用于管理本地系统的 X 显示。 如果希望 <span class="application">XDM</span> 随机启动，
          比较简便的做法是把它写到 <code class="filename">/etc/ttys</code> 配置中。
          有关这个文件的具体格式和使用方法， 请参阅 <a class="xref" href="term.html#term-etcttys" title="25.3.2.1. 添加一个记录到/etc/ttys">Section 25.3.2.1, “添加一个记录到<code class="filename">/etc/ttys</code>”</a> 。
          在默认的 <code class="filename">/etc/ttys</code> 文件， 已经包含了在虚拟终端上运行 <span class="application">XDM</span> 服务的示例：</p><pre class="screen">ttyv8   "/usr/local/bin/xdm -nodaemon"  xterm   off secure</pre><p>默认情况下， 这个记录是关闭的， 要启用它， 您需要把第5部分的 <code class="literal">off</code> 改为 <code class="literal">on</code> ，
          然后按照 <a class="xref" href="term.html#term-hup" title="25.3.2.2. 重新读取/etc/ttys来强制init">Section 25.3.2.2, “重新读取<code class="filename">/etc/ttys</code>来强制<code class="command">init</code>
	  ”</a> 的指导来重启 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> 服务。第一个字段显示虚拟终端名称是 <code class="literal">ttyv8</code>  。
          这意味着 <span class="application">XDM</span> 将运行在第9个虚拟终端上。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71318352"></a>6.6.3. 配置 XDM</h3></div></div></div><p><span class="application">XDM</span> 的配置文件位于 <code class="filename">/usr/local/lib/X11/xdm</code> 目录中。
          里面的配置文件可以改变 <span class="application">XDM</span> 行为和外观。您可以找到以下文件：</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>文件</th><th>描述</th></tr></thead><tbody><tr><td><code class="filename">Xaccess</code></td><td>客户端认证规则。</td></tr><tr><td><code class="filename">Xresources</code></td><td>默认的X资源值。</td></tr><tr><td><code class="filename">Xservers</code></td><td>远程和本地显示管理列表。</td></tr><tr><td><code class="filename">Xsession</code></td><td>用于登录的默认的会话脚本。</td></tr><tr><td><code class="filename">Xsetup_</code>*</td><td>登录之前用于加载应用程序的脚本。</td></tr><tr><td><code class="filename">xdm-config</code></td><td>运行在这台机器上的所有显示的全局配置。</td></tr><tr><td><code class="filename">xdm-errors</code></td><td>服务器程序产生的错误。</td></tr><tr><td><code class="filename">xdm-pid</code></td><td>当前运行的 XDM 的PID。</td></tr></tbody></table></div><p>当 <span class="application">XDM</span> 运行时， 这个目录中有几个脚本和程序可以用来设置桌面。
          在这里简要的介绍下这些文件的简单用法。 这些文件更详细的语法和用法请参照 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a> 。</p><p>默认配置下登陆界面是一个简单的矩形窗口， 上面有计算机的名称、 <span class="quote">“<span class="quote">Login:</span>”</span> 和 <span class="quote">“<span class="quote">Password:</span>”</span> 。
          提示下， 如果你想美化一下 <span class="application">XDM</span> 登陆界面， 这是一个很好的开始。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71345616"></a>6.6.3.1. Xaccess</h4></div></div></div><p>用以连接到由 <span class="application">XDM</span>  所控制的显示设备的协议， 叫做 X 显示管理器连接协议 (XDMCP)。
        这个文件是一组用以控制来自远程计算机的 XDMCP 连接的规则。 除非您修改了 <code class="filename">xdm-config</code> 使其接受远程连接，
        否则其内容将被忽略。 默认情况下， 它不允许来自任何客户端的连接。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71347536"></a>6.6.3.2. Xresources</h4></div></div></div><p>这是一个默认的用来显示选项和登录屏幕的应用程序文件。 您可以在这个文件中对登录程序的外观进行定制。
        它的格式与 <span class="application">Xorg</span> 文档中描述的默认应用程序文件是一样的。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71349328"></a>6.6.3.3. Xservers</h4></div></div></div><p>这是一个可供选择的远程显示服务器列表。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71350480"></a>6.6.3.4. Xsession</h4></div></div></div><p>这是一个用户登录后针对 <span class="application">XDM</span> 的默认会话脚本。
        通常， 用户可自定义的会话脚本是 <code class="filename">~/.xsession</code> 文件。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71352400"></a>6.6.3.5. Xsetup_*</h4></div></div></div><p>在显示选择者或登录接口之前， 这些将被自动运行。 这是一个每个显示都要用到的脚本， 叫做 <code class="filename">Xsetup_</code> ，
        后面会跟一个本地显示的数字（ 比如 <code class="filename">Xsetup_0</code> ）。 典型的，这些脚本将在后台 (如 <code class="command">xconsole</code> )运行一个或两个程序。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71354960"></a>6.6.3.6. xdm-config</h4></div></div></div><p>这个文件是应用程序默认值的形式， 提供了安装时所使用的通用配置信息。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71356112"></a>6.6.3.7. xdm-errors</h4></div></div></div><p>这个文件包含了 <span class="application">XDM</span> 运行的 X 服务器的日志输出。
        如果， <span class="application">XDM</span> 由于某种原因被挂起， 那么到这里寻找错误信息是个好主意。
        这些信息会在每会话的基础上被写到用户的 <code class="filename">~/.xsession-errors</code> 文件中。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71362896"></a>6.6.4. 运行一个网络显示服务器</h3></div></div></div><p>为了让其他客户端能链接到显示服务器， 您必须编辑访问控制规则， 并启用端口监听。 默认情况下，
          这些设置比较保守值。 要让 <span class="application">XDM</span> 能监听到连接请求，首先要注销掉 <code class="filename">xdm-config</code> 中的一行内容：</p><pre class="screen">! SECURITY: do not listen for XDMCP or Chooser requests
! Comment out this line if you want to manage X terminals with xdm
DisplayManager.requestPort:     0</pre><p>然后重启 <span class="application">XDM</span> 。 切记默认程序配置注释以 <span class="quote">“<span class="quote">!</span>”</span> 开头
          而不是一般情况使用的 <span class="quote">“<span class="quote">#</span>”</span> 。您需要设置严格的访问控制？ ── 看看在 <code class="filename">Xaccess</code> 里的实例，
          并参考 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a> 联机手册， 以了解更多细节。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71368144"></a>6.6.5. 替换 XDM</h3></div></div></div><p>有几个方案可以替换默认的 <span class="application">XDM</span> 程序。
          <span class="application">KDM</span> （与 <span class="application">KDE</span> 捆绑在一起的）就是它们中的一个方案，
          <span class="application">KDM</span> 提供了许多视觉上的改进和局部的修饰， 同样能让用户在启动时能选择他们喜欢的窗口管理器。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x-fonts.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="x11.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="x11-wm.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.5. 在 <span class="application">Xorg</span> 中使用字体 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 6.7. 桌面环境</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>