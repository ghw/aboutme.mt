<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>21.3. FreeBSD 作为宿主机操作系统</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手册" /><link rel="up" href="virtualization.html" title="Chapter 21. 虚拟化" /><link rel="prev" href="virtualization-guest.html" title="21.2. FreeBSD 作为客户操作系统" /><link rel="next" href="l10n.html" title="Chapter 22. 本地化－i18n/L10n 使用和设置" /><link rel="copyright" href="legalnotice.html" title="版权声明" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">21.3. FreeBSD 作为宿主机操作系统</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="virtualization-guest.html">Prev</a> </td><th width="60%" align="center">Chapter 21. 虚拟化</th><td width="20%" align="right"> <a accesskey="n" href="l10n.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="virtualization-host"></a>21.3. FreeBSD 作为宿主机操作系统</h2></div></div></div><p><span class="application"><span class="trademark">VirtualBox</span>™</span> 是一个开发非常活跃的， 完整的虚拟化方案， 适用于大多数操作系统，
        包括 <span class="trademark">Windows</span>® 、 <span class="trademark">Mac OS</span>® 、 <span class="trademark">Linux</span>® 和 FreeBSD 。
        也支持使用 <span class="trademark">Windows</span>® 或 <span class="trademark">UNIX</span>®-like 作为它的客户机。 它被作为一个开源的虚拟化方案发布， 同时也单独的提供一个闭源的扩展包组件。
        这个组件提供了对 USB 2.0 设备的支持。 更多有关信息可以在
        <a class="link" href="http://www.virtualbox.org/wiki/Downloads" target="_top"><span class="application"><span class="trademark">VirtualBox</span>™</span> wiki</a><span class="quote">“<span class="quote">下载</span>”</span> 页面找到。
        目前这个扩展包还不支持 FreeBSD 操作系统。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-virtualbox-install"></a>21.3.1. 安装 <span class="trademark">VirtualBox</span>™</h3></div></div></div><p><span class="application"><span class="trademark">VirtualBox</span>™</span> 可以通过 FreeBSD 预编译包或 port 安装 <span class="package">emulators/virtualbox-ose</span> 这个软件包。
          通过 port 安装使用以下命令：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/virtualbox-ose</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>这个 port 有个 <code class="literal">增强功能包(GuestAdditions)</code> 的选项， 它为客户机操作系统提供很多有用的功能，
          比如鼠标指针集成（允许宿主机与客户机之间共享鼠标指针， 而不需要提前按下切换热键来切换）和更好的视频渲染效果，
          尤其是当客户机是 <span class="trademark">Windows</span>® 的时候。 这个增强功能包在客户操作系统安装完成后， 可以在 <span class="guimenu">设备(Devices)</span> 菜单下找到。</p><p>在第一次运行 <span class="application"><span class="trademark">VirtualBox</span>™</span> 之前还需要做一些配置。
          在通过 port 安装的时候会安装一个内核模块到 <code class="filename">/boot/modules</code> 目录， 这个模块需要运行前加载：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload vboxdrv</code></strong></pre><p>为了确保每次重启都会自动加载，可以在 <code class="filename">/boot/loader.conf</code> 文件中增加以下内容：</p><pre class="programlisting">vboxdrv_load="YES"</pre><p>如果需要使用桥接或仅主机网络， 则需要增加以下内容到 <code class="filename">/etc/rc.conf</code> 中，并重启计算机：</p><pre class="programlisting">vboxnet_enable="YES"</pre><p><code class="systemitem">vboxusers</code> 用户组会在 <span class="application"><span class="trademark">VirtualBox</span>™</span> 安装过程时自动添加。
          需要使用 <span class="application"><span class="trademark">VirtualBox</span>™</span> 的所有用户都必须被添加为这个用户组的成员。
          可以使用 <code class="command">pw</code> 命令添加新成员：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod vboxusers -m yourusername</code></strong></pre><p>由于权限限制， 当需要使用桥接网络(bridged networking)时，
          需要修改 <code class="filename">/dev/vboxnetctl</code> 设备的权限：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chown root:vboxusers /dev/vboxnetctl</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 0660 /dev/vboxnetctl</code></strong></pre><p>为了使这个权限永久生效，需要添加以下内容到 <code class="filename">/etc/devfs.conf</code> 中去：</p><pre class="programlisting">own     vboxnetctl root:vboxusers
perm    vboxnetctl 0660</pre><p>要运行 <span class="application"><span class="trademark">VirtualBox</span>™</span>， 可以在 <span class="application">Xorg</span> 会话中执行：</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>VirtualBox</code></strong></pre><p>有关配置和使用 <span class="application"><span class="trademark">VirtualBox</span>™</span> 的更多信息， 请参考官方网站。
          与 FreeBSD 相关和的特定信息和故障排除说明，
          请参阅 <a class="link" href="http://wiki.FreeBSD.org/VirtualBox" target="_top">FreeBSD 维基</a> 页。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-virtualbox-usb-support"></a>21.3.2. <span class="trademark">VirtualBox</span>™ 的 USB 支持</h3></div></div></div><p>为了能够读写 USB 设备， 需要将用户添加到 <code class="systemitem">operator</code> 用户组：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod operator -m jerry</code></strong></pre><p>然后， 添加以下规则到 <code class="filename">/etc/devfs.rules</code> 文件中去， 如果文件不存在则创建：</p><pre class="programlisting">[system=10]
add path 'usb/*' mode 0660 group operator</pre><p>要加载这些新规则需要在 <code class="filename">/etc/rc.conf</code> 中添加以下内容：</p><pre class="programlisting">devfs_system_ruleset="system"</pre><p>然后， 重启 devfs 服务：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service devfs restart</code></strong></pre><p>现在可以在客户操作系统里使用 USB 设备了。 USB 功能是 <span class="trademark">VirtualBox</span>™ 里一个很好的功能。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-virtualbox-host-dvd-cd-access"></a>21.3.3. <span class="trademark">VirtualBox</span>™ 访问宿主机 DVD/CD</h3></div></div></div><p>访问宿主机 DVD/CD 设备是通过共享物理设备来实现的。 在 <span class="trademark">VirtualBox</span>™ 虚拟机存储设置界面，
          首先需要先创建一个空的 IDE CD/DVD  设备， 然后在虚拟 CD/DVD 设备选择物理设备。
          弹出的复选框 <code class="literal">Passthrough</code> 后就允许虚拟机使用物理设备了。
          例如， 使用物理音频 CD 或 burner 了。</p><p><span class="application"><span class="trademark">VirtualBox</span>™</span> 使用 DVD/CD 需要启用 <acronym class="acronym">HAL</acronym> 服务，
          要启用它， 添加以下内容到 <code class="filename">/etc/rc.conf</code> 中：</p><pre class="programlisting">hald_enable="YES"</pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service hald start</code></strong></pre><p>为了让用户能够正常使用的 <span class="application"><span class="trademark">VirtualBox</span>™</span> 物理 DVD/CD 功能，
          需要用户对下列 <code class="filename">/dev/xpt0</code> 、 <code class="filename">/dev/cdN</code> 和 <code class="filename">/dev/passN</code> 设备具有访问权，
          通常的做法是将用户加入到  <code class="systemitem">operator</code> 用户组中。
          通过修改 <code class="filename">/etc/devfs.conf</code> 文件修正这些设备的权限：</p><pre class="programlisting">perm cd* 0600
perm xpt0 0660
perm pass* 0660</pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service devfs restart</code></strong></pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="virtualization-guest.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="virtualization.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="l10n.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">21.2. FreeBSD 作为客户操作系统 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 22. 本地化－<acronym class="acronym">i18n</acronym>/<acronym class="acronym">L10n</acronym> 使用和设置</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>