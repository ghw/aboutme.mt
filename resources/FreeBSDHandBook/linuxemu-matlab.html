<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>11.5. 安装MATLAB®</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手册" /><link rel="up" href="linuxemu.html" title="Chapter 11. Linux二进制兼容模式" /><link rel="prev" href="linuxemu-maple.html" title="11.4. 安装Maple™" /><link rel="next" href="linuxemu-oracle.html" title="11.6. 安装Oracle®" /><link rel="copyright" href="legalnotice.html" title="版权声明" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.5. 安装<span class="trademark">MATLAB</span>®</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu-maple.html">Prev</a> </td><th width="60%" align="center">Chapter 11. Linux二进制兼容模式</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu-oracle.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-matlab"></a>11.5. 安装<span class="trademark">MATLAB</span>®</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Dan</span> <span class="surname">Pelleg</span></span>. </span></div></div></div><a id="idp75249872" class="indexterm"></a><p>这一节描述在一个 FreeBSD 上安装Linux版本的<span class="application"><span class="trademark">MATLAB</span>® version 6.5</span>。
    它工作的很好，除了<span class="application"><span class="trademark">Java Virtual Machine</span>™</span>例外（参考
      <a class="xref" href="linuxemu-matlab.html#matlab-jre" title="11.5.3. 链接Java™运行时环境">Section 11.5.3, “链接<span class="trademark">Java</span>™运行时环境”</a>）。</p><p>Linux版本的<span class="application"><span class="trademark">MATLAB</span>®</span>可以从MathWorks<code class="uri"><a class="uri" href="http://www.mathworks.com" target="_top">http://www.mathworks.com</a></code>订购。请确定您也得到了许可文件或安装说明。
      等您成功后，让他们知道您想要一个本地FreeBSD版本。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75254736"></a>11.5.1. 安装<span class="trademark">MATLAB</span>®</h3></div></div></div><p>请按照下面的步骤安装<span class="application"><span class="trademark">MATLAB</span>®</span>：</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>以<code class="systemitem">root</code>身份插入安装CD并挂载上。
	  推荐使用安装脚本，为了启动安装脚本，键入：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/compat/linux/bin/sh /cdrom/install</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">安装程序是图形的。如果您得到不能打开显示的错误，可以键入
	      <code class="command">setenv HOME ~USER</code>，
	      <em class="replaceable"><code>USER</code></em>是您<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>成的用户。</p></div></li><li class="step"><p>
	    当问<span class="application"><span class="trademark">MATLAB</span>®</span>的根目录时，键入：
	    <strong class="userinput"><code>/compat/linux/usr/local/matlab</code></strong>。</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">为了下面的安装过程更方便，在shell提示符下键入
	    <code class="command">set MATLAB=/compat/linux/usr/local/matlab</code></p></div></li><li class="step"><p>根据获得<span class="application"><span class="trademark">MATLAB</span>®</span>许可时的指示来编辑许可文件。</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">您可以用您喜欢的编辑器提前准备这个文件，
	    并在安装程序要您编辑它之前复制到
	    <code class="filename">$MATLAB/license.dat</code>
	    </p></div></li><li class="step"><p>完成安装过程</p></li></ol></div><p>到这里，您的<span class="application"><span class="trademark">MATLAB</span>®</span>安装已经完成了。
      接下来的步骤是让它和您的FreeBSD 系统<span class="quote">“<span class="quote">胶合</span>”</span>在一起。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75273808"></a>11.5.2. 许可管理器的启动</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>为许可管理器建立符号链接的脚本：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmboot /usr/local/etc/lmboot_TMW</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmdown /usr/local/etc/lmdown_TMW</code></strong></pre></li><li class="step"><p>建立启动文件<code class="filename">/usr/local/etc/rc.d/flexlm.sh</code>。
	  下面的例子是一个<code class="filename">$MATLAB/etc/rc.lm.glnx86</code>的修改版本。
	  变化的是文件的位置，和模拟Linux下许可管理器的启动。 </p><pre class="programlisting">#!/bin/sh
case "$1" in
  start)
        if [ -f /usr/local/etc/lmboot_TMW ]; then
              /compat/linux/bin/sh /usr/local/etc/lmboot_TMW -u <em class="replaceable"><code>username</code></em> &amp;&amp; echo 'MATLAB_lmgrd'
        fi
        ;;
  stop)
	if [ -f /usr/local/etc/lmdown_TMW ]; then
            /compat/linux/bin/sh /usr/local/etc/lmdown_TMW  &gt; /dev/null 2&gt;&amp;1
	fi
        ;;
  *)
	echo "Usage: $0 {start|stop}"
	exit 1
	;;
esac

exit 0</pre><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">必须使脚本文件可执行：</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x /usr/local/etc/rc.d/flexlm.sh</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">您也必须替换<em class="replaceable"><code>username</code></em>为机器上的一个用户（不要是<code class="systemitem">root</code>）。
	    </p></div></li><li class="step"><p>用命令启动许可管理器：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/flexlm.sh start</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-jre"></a>11.5.3. 链接<span class="trademark">Java</span>™运行时环境</h3></div></div></div><p>改变<span class="application"><span class="trademark">Java</span>™</span>运行时环境（JRE），链接到一个可以工作的版本：
      </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $MATLAB/sys/java/jre/glnx86/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>unlink jre; ln -s ./jre1.1.8 ./jre</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75292496"></a>11.5.4. 创建<span class="trademark">MATLAB</span>®启动脚本</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>把下面的启动脚本放到<code class="filename">/usr/local/bin/matlab</code>：
	  </p><pre class="programlisting">#!/bin/sh
/compat/linux/bin/sh /compat/linux/usr/local/matlab/bin/matlab "$@"</pre></li><li class="step"><p>然后输入命令<code class="command">chmod +x /usr/local/bin/matlab</code>。</p></li></ol></div><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">依赖于您的<span class="package">emulators/linux_base</span>版本，
	您在运行这个脚本时可能会出错，为了避免错误，编辑<code class="filename">/compat/linux/usr/local/matlab/bin/matlab</code>，
	把这行：</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if [ `expr "$lscmd" : '.*-&gt;.*'` -ne 0 ]; then</pre><p xmlns="http://www.w3.org/1999/xhtml">（在13.0.1版本是在第410行）改成：</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if test -L $newbase; then</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75303760"></a>11.5.5. Creating a <span class="trademark">MATLAB</span>® Shutdown Script</h3></div></div></div><p>The following is needed to solve a problem with <span class="trademark">MATLAB</span>®
	not exiting correctly.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Create a file
	    <code class="filename">$MATLAB/toolbox/local/finish.m</code>, and
	    in it put the single line:</p><pre class="programlisting">! $MATLAB/bin/finish.sh</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <code class="literal">$MATLAB</code> is
	    literal.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">In the same directory, you will find the files
	      <code class="filename">finishsav.m</code> and
	      <code class="filename">finishdlg.m</code>, which let you save
	      your workspace before quitting.  If you use either of
	      them, insert the line above immediately after the
	      <code class="literal">save</code> command.</p></div></li><li class="step"><p>Create a file
	    <code class="filename">$MATLAB/bin/finish.sh</code>, which will
	    contain the following:</p><pre class="programlisting">#!/usr/compat/linux/bin/sh
(sleep 5; killall -1 matlab_helper) &amp;
exit 0</pre></li><li class="step"><p>Make the file executable:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x $MATLAB/bin/finish.sh</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-using"></a>11.5.6. 使用<span class="trademark">MATLAB</span>®</h3></div></div></div><p>现在您已经可以键入
	<code class="command">matlab</code> 并开始使用它了。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu-maple.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu-oracle.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">11.4. 安装<span class="trademark">Maple</span>™ </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 11.6. 安装<span class="trademark">Oracle</span>®</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>