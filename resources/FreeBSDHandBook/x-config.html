<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.4. 配置 Xorg</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手册" /><link rel="up" href="x11.html" title="Chapter 6. X Window 系统" /><link rel="prev" href="x-install.html" title="6.3. 安装 Xorg" /><link rel="next" href="x-fonts.html" title="6.5. 在 Xorg 中使用字体" /><link rel="copyright" href="legalnotice.html" title="版权声明" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.4. 配置 <span class="application">Xorg</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x-install.html">Prev</a> </td><th width="60%" align="center">Chapter 6. X Window 系统</th><td width="20%" align="right"> <a accesskey="n" href="x-fonts.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-config"></a>6.4. 配置 <span class="application">Xorg</span></h2></div></div></div><a id="idp71122128" class="indexterm"></a><a id="idp71122640" class="indexterm"></a><p>多数情况下 <span class="application">Xorg</span> 并不需要配置。针对那些很久的或者不常见的硬件，开始配置前需要了解下列信息：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>显示器规格</p></li><li class="listitem"><p>显卡芯片类型</p></li><li class="listitem"><p>显卡显存容量</p></li></ul></div><a id="idp71126736" class="indexterm"></a><a id="idp71144016" class="indexterm"></a><a id="idp71145168" class="indexterm"></a><a id="idp71145680" class="indexterm"></a><a id="idp71146832" class="indexterm"></a><p>屏幕分辨率和刷新率是由显示器的水平和垂直同步频率来确定。
        几乎所有的显示器都支持自行检测这些值。 个别不支持的显示器则需要通过显示器附带的文档，
        以及制造商的网站那里获取这些信息。</p><p>通常显卡芯片也能自动检测到， 并自行选择正确的显卡驱动。
        但是事先了解还是有好处的， 以备系统自动检测失败时使用。</p><p>显卡的显存决定系统最大支持的分辨率和颜色深度。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71149136"></a>6.4.1. 注意事项</h3></div></div></div><p>最佳的显示效果取决于显卡设备及其驱动的支持情况。 目前显卡驱动支持如下：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>NVIDIA： NVIDIA 的显卡驱动都可以在 FreeBSD Ports Collection 中的 X11 类中找到， 可以通过它，安装 NVIDIA 显卡设备对应的显卡驱动。</p></li><li class="listitem"><p>Intel：从 FreeBSD 9.1 开始绝大部分 Intel 显卡支持 3D 加速，包括 IronLake、SandyBridge 和 IvyBridge 。
            由于目前 KMS 还处于测试阶段，开启 KMS 支持将导致图像终端控制台（graphical console）与虚拟终端控制台（virtual console）无法使用 Crtl+Alt+F# 切换。</p></li><li class="listitem"><p>ATI/Radeon:  ATI 和 Radeon 显卡的 3D 加速功能不能正常工作，直到 FreeBSD 完成 TTM 功能。 目前这些显卡需要使用 2D 驱动程序，
          如果还是无法正常工作，只能使用 VESA 驱动。</p></li><li class="listitem"><p>Optimus: currently there is no switching support
	    between the two graphics adapters provided by Optimus.
	    Optimus implementations vary, so FreeBSD may or may not
	    be able to successfully load a graphics driver on all
	    hardware. If you get a blank screen, check if the BIOS
	    has an option to disable one of the graphics adapters or
	    to set <span class="quote">“<span class="quote">discrete</span>”</span> mode.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71154256"></a>6.4.2. 配置 <span class="application">Xorg</span></h3></div></div></div><p><span class="application">Xorg</span> 使用 <acronym class="acronym">HAL</acronym> 自动检测键盘和鼠标。
          Ports 中 <span class="package">sysutils/hal</span> 和 <span class="package">devel/dbus</span> 作为 <span class="package">x11/xorg</span> 的依赖自动安装进系统，
          只需要在 <code class="filename">/etc/rc.conf</code> 文件中添加以下内容来启用它们：</p><pre class="programlisting">hald_enable="YES"
dbus_enable="YES"</pre><p>配置 <span class="application">Xorg</span> 前启动这些服务：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service hald start</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>service dbus start</code></strong></pre><p>一旦这些服务启动完成， 就可以键入以下命令让 <span class="application">Xorg</span> 自动生成配置文件：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -configure</code></strong></pre><p>这将会生成一个名为 <code class="filename">/root/xorg.conf.new</code> 的文件，
          它包含了 <span class="application">Xorg</span> 检测到的硬件信息以及它认为应该使用的驱动程序。
          接下来测试自动生成的配置文件， 看它是否能让显卡设备正常工作：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -config xorg.conf.new -retro</code></strong></pre><p>如果看到黑灰的格子以及 X 型鼠标指针， 就表示配置成功了。
          若要退出测试， 需要同时按下 <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F<em class="replaceable"><code>n</code></em></strong></span> （<span class="keycap"><strong>F1</strong></span> 表示第一个虚拟控制台）， 之后按下
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>。</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">按下
	  <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Backspace</strong></span> 组合键也可以用来强制退出 <span class="application">Xorg</span> 。 要启用这个组合键，
    您可以在可以在任何一个 X 终端模拟器中输入以下命令：</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setxkbmap -option terminate:ctrl_alt_bksp</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">或者为 <span class="application">hald</span> 创建一个文件名为 <code class="filename">x11-input.fdi</code> 的键盘配置文件，
        并保存到 <code class="filename">/usr/local/etc/hal/fdi/policy</code> 目录中。这个文件需要包含以下内容：</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
&lt;deviceinfo version="0.2"&gt;
  &lt;device&gt;
    &lt;match key="info.capabilities" contains="input.keyboard"&gt;
	  &lt;merge key="input.x11_options.XkbOptions" type="string"&gt;terminate:ctrl_alt_bksp&lt;/merge&gt;
    &lt;/match&gt;
  &lt;/device&gt;
&lt;/deviceinfo&gt;</pre><p xmlns="http://www.w3.org/1999/xhtml">您将不得不重启你的计算机使 <span class="application">hald</span> 重新读取这个文件。</p><p xmlns="http://www.w3.org/1999/xhtml">此外，还需要在 <code class="filename">xorg.conf.new</code> 中的 <code class="literal">ServerLayout</code> 或 <code class="literal">ServerFlags</code> 小节中添加：</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">Option	"DontZap"	"off"</pre></div><p>如果测试失败， 请参阅 <a class="xref" href="x11-understanding.html" title="6.8. 故障排除">Section 6.8, “故障排除”</a> 。 一旦测试成功，
          就可以将配置文件复制到 <code class="filename">/etc/X11/xorg.conf</code> ：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp xorg.conf.new /etc/X11/xorg.conf</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">桌面环境如 <span class="application">GNOME</span> 、 <span class="application">KDE</span> 或 <span class="application">Xfce</span> 都提供了图形化的工具来修改参数，
              如视频分辨率。使用图像配置工具，参阅  <a class="xref" href="x11-wm.html" title="6.7. 桌面环境">Section 6.7, “桌面环境”</a> 如何安装一个桌面环境。</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x-install.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="x11.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="x-fonts.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.3. 安装 <span class="application">Xorg</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 6.5. 在 <span class="application">Xorg</span> 中使用字体</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>